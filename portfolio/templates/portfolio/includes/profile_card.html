<!-- profil_card.html -->

<div class="card profile-card">
    <div class="cover-image-container">
        <img src="{{ profile.cover_picture.url }}" 
             class="card-img-top cover-image clickable-image" 
             alt="Image de couverture">

        <button class="btn btn-sm btn-light cover-button">
            <i class="fas fa-camera"></i> Changer la photo de couverture
        </button>
    </div>

    <div class="profile-info-bar">
        <div class="d-flex align-items-end profile-header">
            <div class="profile-picture-container">
                <img src="{{ profile.profile_picture.url }}" 
                     class="profile-picture clickable-image" 
                     alt="Photo de profil">
            </div>

            <div class="ms-4 name-and-action">
                <h2 class="profile-name">{{ profile.full_name }}</h2>
                <p class="followers-count">{{ profile.job_title }}</p>
            </div>

            <div class="ms-auto action-buttons d-flex">
                <button class="btn btn-primary me-2">
                    <i class="fas fa-plus"></i> Ajouter à ma story
                </button>
                <button class="btn btn-secondary">
                    <i class="fas fa-pen"></i> Modifier le profil
                </button>
            </div>
        </div>

        <hr class="mt-3 mb-0">

        <ul class="nav nav-tabs profile-nav">
            <li class="nav-item"><a class="nav-link active" href="#">Publications</a></li>
            <li class="nav-item"><a class="nav-link" href="#">À propos</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Photos</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Vidéos</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Plus <i class="fas fa-caret-down"></i></a></li>
            <li class="nav-item ms-auto">
                <button class="btn btn-light settings-button">
                    <i class="fas fa-ellipsis-h"></i>
                </button>
            </li>
        </ul>
    </div>
</div>


<!-- ============================================= -->
<!-- MODAL AVEC BOUTON X POUR FERMER (STYLE FACEBOOK) -->
<!-- ============================================= -->

<div class="modal fade" id="imagePreviewModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-transparent border-0 shadow-none position-relative p-0">

      <!-- BOUTON POUR FERMER (superposé + float right) -->
      <div class="close-wrapper">
          <button type="button"
                  class="close-preview-btn"
                  data-bs-dismiss="modal"
                  aria-label="Close">
              <i class="fas fa-times"></i>
          </button>
      </div>

      <img id="previewImage" src="" class="img-fluid rounded" alt="Prévisualisation">
    </div>
  </div>
</div>

<style>
/* Conteneur qui flotte à droite */
.close-wrapper {
    width: 100%;
    display: flex;
    justify-content: flex-end;
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 99;
}

/* Bouton X style Facebook */
.close-preview-btn {
    background: rgba(0,0,0,0.7);
    border: none;
    color: #fff;
    width: 38px;
    height: 38px;
    font-size: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.close-preview-btn:hover {
    background: rgba(0,0,0,0.85);
}
</style>




<!-- ============================================= -->
<!-- SCRIPT POUR LES IMAGES CLICKABLES             -->
<!-- ============================================= -->

<script>
document.addEventListener("DOMContentLoaded", () => {
    const modal = new bootstrap.Modal(document.getElementById('imagePreviewModal'));
    const previewImage = document.getElementById('previewImage');

    document.querySelectorAll(".clickable-image").forEach(img => {
        img.style.cursor = "pointer";
        img.addEventListener("click", () => {
            previewImage.src = img.src;
            modal.show();
        });
    });
});
</script>
